# 远程文本显示系统

## 项目概述
一个基于蓝牙连接的 PC 端到 Android 平板端的文本传输显示系统。PC 端可以发送文本内容，Android 端负责存储和展示文本内容。

## 系统架构
### PC 客户端
- 基于 Qt/C++ 的跨平台桌面应用
- 提供文本文件选择和发送功能
- 蓝牙连接管理模块
- 简洁的用户界面

### Android 平板端
- 原生 Android 应用程序
- 使用 JNI 调用 C++ 核心库
- SQLite 本地数据存储
- 蓝牙通信服务

## 技术栈详解
### PC 客户端
- **C++17/20**: 核心开发语言
- **Qt 6.x**: 跨平台UI框架和蓝牙模块
- **CMake**: 构建系统
- **SQLite**: 可选的本地缓存

### Android 端
- **Java/Kotlin**: Android UI 层
- **C++**: 核心功能实现
- **JNI**: Java 和 C++ 交互
- **Android Bluetooth API**: 蓝牙通信
- **SQLite**: 本地存储
- **Android Jetpack**: UI组件

## 详细的项目结构
```
remoteTextDisplay/
├── pc-client/
│   ├── src/
│   │   ├── core/             # C++核心功能
│   │   │   ├── bluetooth/    # 蓝牙通信
│   │   │   └── data/        # 数据处理
│   │   ├── ui/              # Qt界面
│   │   └── utils/           # 工具类
│   ├── include/             # 头文件
│   ├── tests/              # 单元测试
│   └── CMakeLists.txt
├── android-app/
│   ├── app/
│   │   ├── src/main/
│   │   │   ├── java/       # Java/Kotlin代码
│   │   │   ├── cpp/        # Native代码
│   │   │   │   ├── core/   # C++核心实现
│   │   │   │   └── jni/    # JNI接口
│   │   │   └── res/        # 资源文件
│   │   ├── CMakeLists.txt
│   │   └── build.gradle
│   └── gradle/
└── docs/
```

## 核心模块设计

### C++ 核心库 (共享代码)
```cpp
// 文本管理器
class TextManager {
    // 文本处理
    // 格式转换
    // 数据压缩
};

// 蓝牙通信
class BluetoothService {
    // 连接管理
    // 数据传输
};

// 存储接口
class StorageInterface {
    // 数据持久化
    // 缓存管理
};
```

## 实现流程详解
1. **初始化阶段**
   - Android 端启动后初始化蓝牙服务
   - 开始广播蓝牙服务
   - PC 端启动后进入待连接状态

2. **连接建立**
   - PC 端扫描nearby设备
   - 用户选择目标 Android 设备
   - 双方建立蓝牙连接
   - 维护心跳包确保连接状态

3. **文本传输流程**
   - PC 端支持以下方式选择文本：
     * 直接输入文本
     * 选择本地文本文件
     * 从剪贴板粘贴
   - 文本分片传输（处理大文本）
   - 传输进度显示
   - 校验机制确保传输完整性

4. **存储管理**
   - 使用 SQLite 存储文本内容
   - 文本数据模型设计：
     * 唯一标识符
     * 文本内容
     * 接收时间
     * 显示顺序
     * 格式设置
   - 支持文本编辑和删除
   - 自动备份机制

5. **显示功能**
   - 支持多种显示模式：
     * 列表模式
     * 单文本全屏模式
     * 自动轮播模式
   - 文本显示特性：
     * 字体大小调节
     * 背景颜色设置
     * 自动滚动速度控制
     * 横竖屏自适应

## 关键功能清单
1. **性能优化的蓝牙通信**
   - 基于 C++ 的高效传输协议
   - 数据压缩和分片
   - 连接状态管理

2. **文本处理引擎**
   - C++ 实现的文本解析
   - 高效的内存管理
   - 支持大文件处理

3. **显示控制**
   - 自定义显示主题
   - 文本轮播控制
   - 定时显示设置
   - 屏幕常亮控制

4. **系统设置**
   - 用户偏好设置
   - 存储空间管理
   - 性能监控
   - 日志记录

## 开发阶段规划
1. **核心库开发** (3周)
   - C++ 核心功能实现
   - 单元测试编写
   - 性能测试

2. **客户端开发** (3周)
   - Qt 界面开发
   - 蓝牙模块集成
   - 打包部署

3. **Android 端开发** (4周)
   - JNI 框架搭建
   - Android UI 实现
   - Native 模块集成

4. **测试优化** (2周)
   - 功能测试
   - 性能优化
   - Bug修复

5. **发布准备** (1周)
   - UI polish
   - 文档完善
   - 发布准备

## 注意事项
1. 需要考虑 Android 蓝牙权限申请
2. 大文本传输的性能优化
3. 电池使用优化
4. 异常状态处理机制
5. 数据备份恢复机制

